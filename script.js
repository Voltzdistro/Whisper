const _0x344099=_0x4d2c;(function(_0x1e51ea,_0x330169){const _0x5d7906=_0x4d2c,_0x127b0e=_0x1e51ea();while(!![]){try{const _0xdc678b=-parseInt(_0x5d7906(0x1f0))/0x1+parseInt(_0x5d7906(0x1f5))/0x2+-parseInt(_0x5d7906(0x1f2))/0x3+-parseInt(_0x5d7906(0x1eb))/0x4+parseInt(_0x5d7906(0x21f))/0x5*(-parseInt(_0x5d7906(0x22b))/0x6)+-parseInt(_0x5d7906(0x1ef))/0x7+parseInt(_0x5d7906(0x20f))/0x8*(parseInt(_0x5d7906(0x22a))/0x9);if(_0xdc678b===_0x330169)break;else _0x127b0e['push'](_0x127b0e['shift']());}catch(_0x161a69){_0x127b0e['push'](_0x127b0e['shift']());}}}(_0x1741,0xe9900));import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';function _0x4d2c(_0x4b6bad,_0xb42bb5){const _0x17415b=_0x1741();return _0x4d2c=function(_0x4d2c78,_0x288a79){_0x4d2c78=_0x4d2c78-0x1e9;let _0x1d153f=_0x17415b[_0x4d2c78];return _0x1d153f;},_0x4d2c(_0x4b6bad,_0xb42bb5);}const SUPABASE_URL=_0x344099(0x210),SUPABASE_ANON_KEY=_0x344099(0x201),supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY),landing=document[_0x344099(0x220)](_0x344099(0x222)),app=document['getElementById'](_0x344099(0x223)),form=document[_0x344099(0x220)](_0x344099(0x1fa)),textInput=document[_0x344099(0x220)]('textInput'),fileInput=document[_0x344099(0x220)](_0x344099(0x230)),filePreview=document['getElementById'](_0x344099(0x20e)),submitBtn=document['getElementById'](_0x344099(0x211)),submitText=document[_0x344099(0x220)]('submitText'),charCount=document[_0x344099(0x220)](_0x344099(0x1f1)),charWarning=document[_0x344099(0x220)](_0x344099(0x1e9));let files=[],isSubmitting=![];function init(){const _0x5c2080=_0x344099;setTimeout(()=>{const _0xdbf498=_0x4d2c;landing[_0xdbf498(0x212)]['display']=_0xdbf498(0x231),app[_0xdbf498(0x202)][_0xdbf498(0x21e)](_0xdbf498(0x1f9));},0x9c4),textInput[_0x5c2080(0x225)]('input',handleTextInput),fileInput[_0x5c2080(0x225)]('change',handleFileChange),form['addEventListener'](_0x5c2080(0x215),handleSubmit);}function handleTextInput(){const _0x5619c5=_0x344099,_0x1dcc24=textInput[_0x5619c5(0x1ed)]['length'],_0x595f23=0x1f4-_0x1dcc24;charCount[_0x5619c5(0x203)]=_0x1dcc24+'/500\x20characters',_0x595f23<=0x32&&_0x595f23>0x0?(charWarning[_0x5619c5(0x203)]=_0x595f23+_0x5619c5(0x1fb),charWarning[_0x5619c5(0x202)][_0x5619c5(0x21e)]('hidden')):charWarning[_0x5619c5(0x202)][_0x5619c5(0x204)](_0x5619c5(0x1f9)),updateSubmitButton();}function handleFileChange(_0x386b20){const _0x323b17=_0x344099,_0xc7cca4=Array[_0x323b17(0x21b)](_0x386b20[_0x323b17(0x1f6)][_0x323b17(0x1ee)])[_0x323b17(0x200)](0x0,0x2);files=_0xc7cca4,updateFilePreview(),updateSubmitButton();}function updateFilePreview(){const _0x552ffb=_0x344099;if(files[_0x552ffb(0x228)]===0x0){filePreview[_0x552ffb(0x202)][_0x552ffb(0x204)]('hidden');return;}filePreview[_0x552ffb(0x202)]['remove']('hidden'),filePreview[_0x552ffb(0x214)]='',files[_0x552ffb(0x208)]((_0x124340,_0x6e6889)=>{const _0xd2c8f2=_0x552ffb,_0x444a88=document[_0xd2c8f2(0x1f7)](_0xd2c8f2(0x1fc));_0x444a88[_0xd2c8f2(0x22d)]=_0xd2c8f2(0x22e),_0x444a88[_0xd2c8f2(0x214)]=_0xd2c8f2(0x224)+_0x124340[_0xd2c8f2(0x229)]+_0xd2c8f2(0x20a)+_0x6e6889+')\x22>Ã—</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',filePreview[_0xd2c8f2(0x22f)](_0x444a88);});}function removeFile(_0x20d1bb){const _0x168eda=_0x344099;files=files[_0x168eda(0x205)]((_0x4f7c2b,_0x1e8354)=>_0x1e8354!==_0x20d1bb),updateFilePreview(),updateSubmitButton();const _0x297ed6=new DataTransfer();files['forEach'](_0x29454b=>_0x297ed6[_0x168eda(0x1fd)]['add'](_0x29454b)),fileInput[_0x168eda(0x1ee)]=_0x297ed6['files'];}function updateSubmitButton(){const _0x167927=_0x344099,_0x36b655=textInput[_0x167927(0x1ed)]['trim']()['length']>0x0,_0x5337e6=files[_0x167927(0x228)]>0x0,_0x31733b=_0x36b655||_0x5337e6;submitBtn[_0x167927(0x1f4)]=!_0x31733b||isSubmitting;}function _0x1741(){const _0x462c35=['none','charWarning','getPublicUrl','7178556CeHLCL','Sending...','value','files','8225910XLSrke','1003398bNTIfo','charCount','3967731hxvtqC','now','disabled','1652652TECVLD','target','createElement','.submit-icon','hidden','whisperForm','\x20left','div','items','Upload\x20error:','whisper-images','slice','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZuZXd6Ynp4enV6aWV1c2d1c3dlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxMTA3NjUsImV4cCI6MjA3MjY4Njc2NX0.SsBl3I9nf-Gh_OMb0wiXcZeG4-7ARrPRAB5hVoChb5g','classList','textContent','add','filter','message','querySelector','forEach','preventDefault','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22file-remove\x22\x20onclick=\x22removeFile(','storage','upload','URL\x20error:','filePreview','7307992kZIjWE','https://fnewzbzxzuzieusguswe.supabase.co','submitBtn','style','trim','innerHTML','submit','split','insert','pop','error','outerHTML','from','.loading-spinner','loading','remove','645WUpdDk','getElementById','messages','landing','app','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22file-name\x22>','addEventListener','removeFile','push','length','name','63PDfNXk','45042WkreLQ','DOMContentLoaded','className','file-item','appendChild','fileInput'];_0x1741=function(){return _0x462c35;};return _0x1741();}async function handleSubmit(_0x1faf00){const _0x4fc96a=_0x344099;_0x1faf00[_0x4fc96a(0x209)]();const _0x591ca6=[];if(isSubmitting)return;const _0x2fb886=textInput[_0x4fc96a(0x1ed)][_0x4fc96a(0x213)]()[_0x4fc96a(0x228)]>0x0,_0x3fd93d=files[_0x4fc96a(0x228)]>0x0;if(!_0x2fb886&&!_0x3fd93d)return;isSubmitting=!![],updateSubmitButton(),submitText['textContent']=_0x4fc96a(0x1ec);const _0x52b776=submitBtn[_0x4fc96a(0x207)](_0x4fc96a(0x1f8));_0x52b776[_0x4fc96a(0x21a)]='<div\x20class=\x22loading-spinner\x22></div>';const {data:_0x4adef1,error:_0x5e09b2}=await supabase[_0x4fc96a(0x21b)](_0x4fc96a(0x221))[_0x4fc96a(0x217)]([{'text':textInput[_0x4fc96a(0x1ed)],'image_urls':_0x591ca6}]);textInput[_0x4fc96a(0x1ed)]='',files=[],fileInput[_0x4fc96a(0x1ed)]='',updateFilePreview(),handleTextInput(),isSubmitting=![],submitText[_0x4fc96a(0x203)]='Send\x20Whisper';const _0x40b8ad=submitBtn['querySelector'](_0x4fc96a(0x21c));_0x40b8ad['outerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22submit-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<line\x20x1=\x2222\x22\x20y1=\x222\x22\x20x2=\x2211\x22\x20y2=\x2213\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<polygon\x20points=\x2222,2\x2015,22\x2011,13\x202,9\x2022,2\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20',updateSubmitButton();}window[_0x344099(0x226)]=removeFile;document['readyState']===_0x344099(0x21d)?document[_0x344099(0x225)](_0x344099(0x22c),init):init();for(let i=0x0;i<files[_0x344099(0x228)];i++){const file=files[i],fileExt=file[_0x344099(0x229)][_0x344099(0x216)]('.')[_0x344099(0x218)](),fileName=Date[_0x344099(0x1f3)]()+'_'+i+'.'+fileExt,{data,error}=await supabase[_0x344099(0x20b)][_0x344099(0x21b)](_0x344099(0x1ff))[_0x344099(0x20c)](fileName,file);if(error){console['error'](_0x344099(0x1fe),error[_0x344099(0x206)]);continue;}const {publicUrl,error:urlError}=supabase['storage'][_0x344099(0x21b)](_0x344099(0x1ff))[_0x344099(0x1ea)](fileName);if(urlError){console[_0x344099(0x219)](_0x344099(0x20d),urlError[_0x344099(0x206)]);continue;}filesUrlsArray[_0x344099(0x227)](publicUrl);}