const _0x159ab5=_0x5e26;(function(_0x1e626f,_0x1179a3){const _0x2b847=_0x5e26,_0x43c72c=_0x1e626f();while(!![]){try{const _0xe297e7=-parseInt(_0x2b847(0x1db))/0x1*(-parseInt(_0x2b847(0x204))/0x2)+parseInt(_0x2b847(0x206))/0x3*(parseInt(_0x2b847(0x1da))/0x4)+-parseInt(_0x2b847(0x1f9))/0x5*(parseInt(_0x2b847(0x1d4))/0x6)+-parseInt(_0x2b847(0x1e2))/0x7*(parseInt(_0x2b847(0x20d))/0x8)+parseInt(_0x2b847(0x216))/0x9*(-parseInt(_0x2b847(0x219))/0xa)+parseInt(_0x2b847(0x1e4))/0xb*(-parseInt(_0x2b847(0x218))/0xc)+-parseInt(_0x2b847(0x1f0))/0xd*(-parseInt(_0x2b847(0x1d6))/0xe);if(_0xe297e7===_0x1179a3)break;else _0x43c72c['push'](_0x43c72c['shift']());}catch(_0x3eef86){_0x43c72c['push'](_0x43c72c['shift']());}}}(_0x17da,0x5e772));import{createClient}from'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';const SUPABASE_URL='https://fnewzbzxzuzieusguswe.supabase.co',SUPABASE_ANON_KEY=_0x159ab5(0x1dd),supabase=createClient(SUPABASE_URL,SUPABASE_ANON_KEY),landing=document[_0x159ab5(0x20e)](_0x159ab5(0x210)),app=document[_0x159ab5(0x20e)](_0x159ab5(0x1f6)),form=document[_0x159ab5(0x20e)](_0x159ab5(0x1d7)),textInput=document[_0x159ab5(0x20e)](_0x159ab5(0x1f2)),fileInput=document[_0x159ab5(0x20e)](_0x159ab5(0x1e1)),filePreview=document[_0x159ab5(0x20e)](_0x159ab5(0x1dc)),submitBtn=document[_0x159ab5(0x20e)](_0x159ab5(0x1f4)),submitText=document[_0x159ab5(0x20e)](_0x159ab5(0x20a)),charCount=document[_0x159ab5(0x20e)]('charCount'),charWarning=document['getElementById'](_0x159ab5(0x212));let files=[],isSubmitting=![];function init(){const _0x5db5d3=_0x159ab5;setTimeout(()=>{const _0xe4fea1=_0x5e26;landing['style'][_0xe4fea1(0x1ec)]=_0xe4fea1(0x1de),app[_0xe4fea1(0x201)][_0xe4fea1(0x213)](_0xe4fea1(0x1d3));},0x9c4),textInput['addEventListener'](_0x5db5d3(0x205),handleTextInput),fileInput[_0x5db5d3(0x211)](_0x5db5d3(0x202),handleFileChange),form[_0x5db5d3(0x211)](_0x5db5d3(0x209),handleSubmit);}function handleTextInput(){const _0x539d4e=_0x159ab5,_0x45a3cd=textInput[_0x539d4e(0x20c)][_0x539d4e(0x1d9)],_0x1829da=0x1f4-_0x45a3cd;charCount['textContent']=_0x45a3cd+_0x539d4e(0x1f5),_0x1829da<=0x32&&_0x1829da>0x0?(charWarning[_0x539d4e(0x1fe)]=_0x1829da+_0x539d4e(0x1e5),charWarning[_0x539d4e(0x201)][_0x539d4e(0x213)]('hidden')):charWarning[_0x539d4e(0x201)][_0x539d4e(0x1fa)](_0x539d4e(0x1d3)),updateSubmitButton();}function handleFileChange(_0x277a9b){const _0x7f2c72=_0x159ab5,_0x8f4a62=Array[_0x7f2c72(0x1d8)](_0x277a9b[_0x7f2c72(0x1eb)][_0x7f2c72(0x217)])['slice'](0x0,0x2);files=_0x8f4a62,updateFilePreview(),updateSubmitButton();}function updateFilePreview(){const _0x1686c3=_0x159ab5;if(files['length']===0x0){filePreview['classList'][_0x1686c3(0x1fa)](_0x1686c3(0x1d3));return;}filePreview[_0x1686c3(0x201)][_0x1686c3(0x213)](_0x1686c3(0x1d3)),filePreview[_0x1686c3(0x214)]='',files['forEach']((_0xd8252b,_0x1f31ae)=>{const _0x286ae7=_0x1686c3,_0x28bbb9=document[_0x286ae7(0x1ee)](_0x286ae7(0x1df));_0x28bbb9['className']=_0x286ae7(0x1e3),_0x28bbb9[_0x286ae7(0x214)]=_0x286ae7(0x1f3)+_0xd8252b[_0x286ae7(0x21c)]+_0x286ae7(0x1ea)+_0x1f31ae+_0x286ae7(0x1ff),filePreview[_0x286ae7(0x208)](_0x28bbb9);});}function removeFile(_0x3e4aff){const _0x34b3d4=_0x159ab5;files=files['filter']((_0x1eceaa,_0x225b6f)=>_0x225b6f!==_0x3e4aff),updateFilePreview(),updateSubmitButton();const _0x3ae8ee=new DataTransfer();files['forEach'](_0x4a6c27=>_0x3ae8ee['items'][_0x34b3d4(0x1fa)](_0x4a6c27)),fileInput[_0x34b3d4(0x217)]=_0x3ae8ee[_0x34b3d4(0x217)];}function updateSubmitButton(){const _0x3fa5fd=_0x159ab5,_0xeac035=textInput['value'][_0x3fa5fd(0x1d5)]()[_0x3fa5fd(0x1d9)]>0x0,_0x356ad6=files[_0x3fa5fd(0x1d9)]>0x0,_0x541c66=_0xeac035||_0x356ad6;submitBtn['disabled']=!_0x541c66||isSubmitting;}async function handleSubmit(_0x4d8e18){const _0x6cd7aa=_0x159ab5;_0x4d8e18[_0x6cd7aa(0x1e8)]();const _0x16fc0d=[];if(isSubmitting)return;const _0x347c00=textInput[_0x6cd7aa(0x20c)][_0x6cd7aa(0x1d5)]()['length']>0x0,_0x120dd3=files['length']>0x0;if(!_0x347c00&&!_0x120dd3)return;isSubmitting=!![],updateSubmitButton(),submitText[_0x6cd7aa(0x1fe)]=_0x6cd7aa(0x1ef);const _0x56c993=submitBtn[_0x6cd7aa(0x20b)]('.submit-icon');_0x56c993['outerHTML']=_0x6cd7aa(0x1fb);const {data:_0xd2cb6f,error:_0x3d05d1}=await supabase['from'](_0x6cd7aa(0x21b))[_0x6cd7aa(0x20f)]([{'text':textInput['value'],'image_urls':_0x16fc0d}]);textInput[_0x6cd7aa(0x20c)]='',files=[],fileInput[_0x6cd7aa(0x20c)]='',updateFilePreview(),handleTextInput(),isSubmitting=![],submitText[_0x6cd7aa(0x1fe)]='Send\x20Whisper';const _0x21d154=submitBtn['querySelector'](_0x6cd7aa(0x21d));_0x21d154[_0x6cd7aa(0x215)]=_0x6cd7aa(0x203),updateSubmitButton();}function _0x5e26(_0x1ec858,_0x225e83){const _0x17da7a=_0x17da();return _0x5e26=function(_0x5e2602,_0x8711ad){_0x5e2602=_0x5e2602-0x1d2;let _0x485f70=_0x17da7a[_0x5e2602];return _0x485f70;},_0x5e26(_0x1ec858,_0x225e83);}window[_0x159ab5(0x1fc)]=removeFile;document[_0x159ab5(0x1e6)]===_0x159ab5(0x1f8)?document[_0x159ab5(0x211)](_0x159ab5(0x1ed),init):init();function _0x17da(){const _0x5904c3=['input','196764aLiQFF','whisper-images','appendChild','submit','submitText','querySelector','value','3664856RRfNZL','getElementById','insert','landing','addEventListener','charWarning','remove','innerHTML','outerHTML','9WSVaQG','files','12ZBxLrI','759870XZUpQK','upload','messages','name','.loading-spinner','storage','hidden','6mTmqAI','trim','406dzgPMx','whisperForm','from','length','8egpNqm','4634nJMtLQ','filePreview','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZuZXd6Ynp4enV6aWV1c2d1c3dlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxMTA3NjUsImV4cCI6MjA3MjY4Njc2NX0.SsBl3I9nf-Gh_OMb0wiXcZeG4-7ARrPRAB5hVoChb5g','none','div','getPublicUrl','fileInput','7mydcOn','file-item','5721661nWJypX','\x20left','readyState','error','preventDefault','split','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22file-remove\x22\x20onclick=\x22removeFile(','target','display','DOMContentLoaded','createElement','Sending...','524966MtxkfR','message','textInput','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22file-name\x22>','submitBtn','/500\x20characters','app','URL\x20error:','loading','1877265GcWmeU','add','<div\x20class=\x22loading-spinner\x22></div>','removeFile','disabled','textContent',')\x22>Ã—</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','push','classList','change','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22submit-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<line\x20x1=\x2222\x22\x20y1=\x222\x22\x20x2=\x2211\x22\x20y2=\x2213\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<polygon\x20points=\x2222,2\x2015,22\x2011,13\x202,9\x2022,2\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20','222cdSJwB'];_0x17da=function(){return _0x5904c3;};return _0x17da();}for(let i=0x0;i<files[_0x159ab5(0x1d9)];i++){const file=files[i],fileExt=file[_0x159ab5(0x21c)][_0x159ab5(0x1e9)]('.')['pop'](),fileName=Date['now']()+'_'+i+'.'+fileExt,{data,error}=await supabase[_0x159ab5(0x1d2)][_0x159ab5(0x1d8)](_0x159ab5(0x207))[_0x159ab5(0x21a)](fileName,file);if(error){console['error']('Upload\x20error:',error['message']);continue;}const {publicUrl,error:urlError}=supabase[_0x159ab5(0x1d2)][_0x159ab5(0x1d8)](_0x159ab5(0x207))[_0x159ab5(0x1e0)](fileName);if(urlError){console[_0x159ab5(0x1e7)](_0x159ab5(0x1f7),urlError[_0x159ab5(0x1f1)]);continue;}filesUrlsArray[_0x159ab5(0x200)](publicUrl);}fileInput[_0x159ab5(0x1fd)]=!![];